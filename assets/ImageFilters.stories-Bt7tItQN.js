import{r as o,R as e}from"./index-BYb6XiQz.js";const Tt={grayscale:{saturate:0},tokyo:{brightness:3,contrast:-18,hueRotate:355,saturate:17,shadows:2,grain:30,vignette:10,colorMatrix:new Float32Array([1.3,0,0,0,0,.92,0,0,0,0,.97,0,0,0,0,1])},malibu:{brightness:-2,contrast:-1,hueRotate:1,saturate:-33,shadows:79,grain:10,vignette:10,colorMatrix:new Float32Array([1.25,0,0,0,0,.96,0,0,0,0,1,0,0,0,0,1])},miami:{brightness:.91,contrast:1,hueRotate:339,saturate:.82,shadows:1.09,grain:.01,vignette:0,colorMatrix:new Float32Array([1.7,0,0,0,0,.9,0,0,0,0,1.1,0,0,0,0,1])},sahara:{colorMatrix:new Float32Array([1.2,.1,.2,0,.2,.8,.2,0,.1,.2,.9,0,0,0,0,1])},rio:{brightness:1,contrast:.89,hueRotate:338,saturate:1.2,shadows:1,grain:.1,vignette:0,colorMatrix:new Float32Array([1.4,0,0,0,0,1.2,0,0,0,0,1,0,0,0,0,1])},phoenix:{saturate:1.2,brightness:1.1,hueRotate:-20},jerusalem:{brightness:6,contrast:2,hueRotate:1,saturate:1.01,shadows:1.86,grain:.2,vignette:.5,colorMatrix:new Float32Array([1.25,0,0,0,0,.96,0,0,0,0,1,0,0,0,0,1])},havana:{brightness:0,contrast:0,hueRotate:360,saturate:-33,shadows:79,grain:10,vignette:10,colorMatrix:new Float32Array([1.25,0,0,0,0,.96,0,0,0,0,1,0,0,0,0,1])},arctic:{colorMatrix:new Float32Array([.5,0,0,0,0,.7,0,0,0,0,1.2,0,0,0,0,1])},silberian:{brightness:0,contrast:-3,hueRotate:0,saturate:-22,shadows:-33,grain:0,vignette:0,colorMatrix:new Float32Array([.8,0,0,0,0,.8,0,0,0,0,1.6,0,0,0,0,1])},oslo:{brightness:8,contrast:-3,hueRotate:2,saturate:-22,shadows:84,grain:4,vignette:10,colorMatrix:new Float32Array([.7,0,0,0,0,.9,0,0,0,0,2,0,0,0,0,1])},icelandic:{brightness:11,contrast:4,hueRotate:2,saturate:-65,shadows:64,grain:5,vignette:10,colorMatrix:new Float32Array([.7,0,0,0,0,.7,0,0,0,0,1.7,0,0,0,0,1])},glacier:{brightness:-6,contrast:14,hueRotate:331,saturate:-54,shadows:100,grain:5,vignette:10,colorMatrix:new Float32Array([.8,0,0,0,0,.9,0,0,0,0,2.1,0,0,0,0,1])},aurora:{brightness:-10,contrast:-16,hueRotate:1,saturate:14,shadows:-20,grain:10,vignette:50,colorMatrix:new Float32Array([.83,0,0,0,0,.95,0,0,0,0,1.88,0,0,0,0,1])},alpine:{brightness:-6,contrast:8,hueRotate:319,saturate:-44,shadows:57,grain:0,vignette:10,colorMatrix:new Float32Array([.8,0,0,0,0,.7,0,0,0,0,1.9,0,0,0,0,1])},antarctic:{brightness:-20,contrast:11,hueRotate:331,saturate:-37,shadows:57,grain:0,vignette:0,colorMatrix:new Float32Array([.9,0,0,0,0,1.1,0,0,0,0,2.4,0,0,0,0,1])},brightness:{brightness:50},contrast:{contrast:100},saturate:{saturate:100},hue:{hueRotate:90},vintage:{sepia:50,contrast:20,brightness:-10},cool:{hueRotate:270,saturate:50},fancyEffect:{brightness:20,contrast:10,colorMatrix:new Float32Array([1.2,0,0,0,0,1,.5,0,0,0,1.5,0,0,0,0,1])},deep:{colorMatrix:new Float32Array([1.5,0,0,0,0,1.2,0,0,0,0,2,0,0,0,0,1])},grove:{brightness:-1,contrast:3,saturate:-9,hueRotate:334,colorMatrix:new Float32Array([.6,0,0,0,0,.8,0,0,0,0,.8,0,0,0,0,1])},amazon:{brightness:0,contrast:0,hueRotate:84,saturate:-20,shadows:-37,grain:9,vignette:0,colorMatrix:new Float32Array([.9,0,0,0,0,.7,0,0,0,0,1,0,0,0,0,1])},hallow:{brightness:31,contrast:-24,hueRotate:28,saturate:-17,shadows:-27,grain:6,vignette:0,colorMatrix:new Float32Array([1,0,0,0,0,1,0,0,0,0,.9,0,0,0,0,1])},cedar:{brightness:31,contrast:-23,hueRotate:84,saturate:-20,shadows:-27,grain:6,vignette:0,colorMatrix:new Float32Array([.9,0,0,0,0,.3,0,0,0,0,1,0,0,0,0,1])},safari:{brightness:0,contrast:0,hueRotate:321,saturate:0,shadows:0,grain:0,vignette:0,colorMatrix:new Float32Array([1.1,0,0,0,0,1.2,0,0,0,0,.4,0,0,0,0,1])},shade:{brightness:18,contrast:-7,hueRotate:327,saturate:-13,shadows:-43,grain:6,vignette:0,colorMatrix:new Float32Array([1.2,0,0,0,0,1.1,0,0,0,0,.4,0,0,0,0,1])},desert:{brightness:18,contrast:-20,hueRotate:323,saturate:-15,shadows:-37,grain:6,vignette:0,colorMatrix:new Float32Array([1.2,0,0,0,0,1.3,0,0,0,0,.3,0,0,0,0,1])},mutedSepia:{brightness:-10,contrast:5},moody:{brightness:-20,contrast:-10,saturate:-50},goldenHour:{brightness:20,contrast:10,hueRotate:25},oceanBreeze:{saturate:40,hueRotate:-50,brightness:10},cinematic:{contrast:20,brightness:-10,sepia:10},noir:{saturate:-100,contrast:20,brightness:-20},rainforest:{brightness:15,contrast:5,hueRotate:15},nightVibes:{brightness:-30,contrast:30,saturate:-10,hueRotate:-10},vintageFilm:{contrast:-10,brightness:-15,saturate:-20},static:{contrast:-15,saturate:-100},frequency:{contrast:-15,saturate:-100,shadows:-52,grain:9},broadcast:{contrast:-21,saturate:-100,shadows:-60,grain:9},retro:{contrast:-27,saturate:-100,brightness:34},transistor:{contrast:17,saturate:-100,brightness:-13,grain:21},jazz:{contrast:-64,saturate:-100,brightness:29,grain:0},classic:{saturate:-100,brightness:24,grain:21},naight8:{saturate:-100},goldenTint:{colorMatrix:new Float32Array([1,.2,0,0,.1,.9,0,0,0,.2,.8,0,0,0,0,1])},lavenderHaze:{colorMatrix:new Float32Array([.7,.1,.3,0,.2,.6,.3,0,.2,.1,.7,0,0,0,0,1])},emeraldGlow:{colorMatrix:new Float32Array([.6,0,0,0,0,1.1,0,0,0,0,.7,0,0,0,0,1])},roseTint:{colorMatrix:new Float32Array([1.2,.1,.2,0,.2,.8,.2,0,.1,.2,.9,0,0,0,0,1])},arcticInversion:{colorMatrix:new Float32Array([1,0,0,0,0,.8,0,0,0,0,-1.8,0,0,0,0,1])},crimsonGlow:{colorMatrix:new Float32Array([1.3,0,0,0,0,.8,0,0,0,0,1,0,0,0,0,1])},rusticSunset:{brightness:.94,contrast:.93,saturate:.8,hueRotate:1,colorMatrix:new Float32Array([1.2,0,0,0,0,.7,0,0,0,0,.6,0,0,0,0,1])},sunsetDream:{colorMatrix:new Float32Array([1.2,.1,0,0,0,1.1,0,0,0,0,.7,0,0,0,0,1])},blueLagoon:{colorMatrix:new Float32Array([.8,0,.1,0,0,.9,0,0,0,0,1.5,0,0,0,0,1])},amberGlow:{colorMatrix:new Float32Array([1.2,0,0,0,0,1.1,0,0,0,0,.6,0,0,0,0,1])}};function M(a,r){const[i,d]=o.useState(a);return o.useEffect(()=>{const s=setTimeout(()=>{d(a)},r);return()=>{clearTimeout(s)}},[a,r]),i}function Ga(a,r){const i=new Float32Array(16);for(let d=0;d<4;d++)for(let s=0;s<4;s++){let y=0;for(let u=0;u<4;u++)y+=a[d*4+u]*r[u*4+s];i[d*4+s]=y}return i}function Ia(a){if(a.length!==16)throw new Error("Ожидается матрица 4x4 (16 элементов)");const r=[];for(let i=0;i<4;i++)r.push(a[i*4]),r.push(a[i*4+1]),r.push(a[i*4+2]),r.push(a[i*4+3]),r.push(0);return r.join(" ")}const F=[];for(let a=0;a<256;++a)F.push((a+256).toString(16).slice(1));function Ba(a,r=0){return(F[a[r+0]]+F[a[r+1]]+F[a[r+2]]+F[a[r+3]]+"-"+F[a[r+4]]+F[a[r+5]]+"-"+F[a[r+6]]+F[a[r+7]]+"-"+F[a[r+8]]+F[a[r+9]]+"-"+F[a[r+10]]+F[a[r+11]]+F[a[r+12]]+F[a[r+13]]+F[a[r+14]]+F[a[r+15]]).toLowerCase()}let it;const La=new Uint8Array(16);function Aa(){if(!it){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");it=crypto.getRandomValues.bind(crypto)}return it(La)}const Pa=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rt={randomUUID:Pa};function Ma(a,r,i){var s;if(Rt.randomUUID&&!r&&!a)return Rt.randomUUID();a=a||{};const d=a.random??((s=a.rng)==null?void 0:s.call(a))??Aa();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,Ba(d)}const He=new Map;function Na(a,r,i){const d=`${i}_${a}x${r}`;if(He.has(d))return He.get(d);const s=document.createElement("canvas");s.width=a,s.height=r;const y=s.getContext("2d");if(!y)return s;let u="linear",G=i.match(/(linear|radial)-gradient\(([^)]+)\)/);if(!G)return s;u=G[1];const C=G[2];let k="0deg",_=C;if(u==="linear"){const E=C.match(/^(\d+deg)/);E&&(k=E[1],_=C.substring(E[0].length+1))}else _=C;const h=[];let I="",W=0;for(let E=0;E<_.length;E++){const f=_[E];f==="("&&W++,f===")"&&W--,f===","&&W===0?(h.push(I.trim()),I=""):I+=f}I&&h.push(I.trim());let R;if(u==="linear")if(k.includes("deg")){const f=parseInt(k)*Math.PI/180,N=a/2-Math.cos(f)*a/2,g=r/2-Math.sin(f)*r/2,b=a/2+Math.cos(f)*a/2,v=r/2+Math.sin(f)*r/2;R=y.createLinearGradient(N,g,b,v)}else R=y.createLinearGradient(0,0,0,r);else if(u==="radial"){const E=a/2,f=r/2,N=Math.max(a,r)/2;R=y.createRadialGradient(E,f,0,E,f,N)}return R&&(h.forEach((E,f)=>{let N="",g="";const b=E.match(/(#[0-9a-fA-F]{6,8}|#[0-9a-fA-F]{3,4})(.*)/);if(b)N=b[1],g=(b[2]||"").trim();else return;let v;g&&(g.includes("%")||!isNaN(Number(g)))?g.includes("%")?v=parseFloat(g)/100:v=parseFloat(g):v=h.length===1?0:f/(h.length-1),v=Math.max(0,Math.min(1,v)),isFinite(v)&&(R==null||R.addColorStop(v,N))}),y.fillStyle=R,y.fillRect(0,0,a,r),He.set(d,s)),s}function ka(){He.clear()}const Yt=({imageUrl:a,filter:r,redChannel:i=1,greenChannel:d=1,blueChannel:s=1,brightness:y=0,contrast:u=0,saturation:G=0,hueRotate:C=0,vignette:k=0,shadows:_=0,grain:h=0,filterIntensity:I=100,sharpness:W=0,saveImage:R,styles:E,preview:f,highlights:N=0,canvasColor:g,gradient:b,flip:v,rotate:oe,crop:m})=>{const K=o.useRef(null),w=o.useRef(new Image),[H,S]=o.useState(null),[z,A]=o.useState(!1),ee=`filter-${Ma()}`,ie=M(y,300),l=M(u,300),T=M(G,300),P=M(C,300),Y=M(i,300),$=M(d,300),X=M(s,300),le=M(_,300),J=M(k??0,300),Ue=M(h??0,300),Fe=M(W??0,300),We=M(I??100,300),Ge=M(N,300),qe=M(g,300),me=M(b,300),Ie=o.useRef(),se=o.useRef(),Be=o.useRef(),U=r&&Tt[r]?Tt[r]:{},q=(I??0)/100,pe=(y+100)/100,$e=(u+100)/100,Xe=(G+100)/100,Le=C/360,he=(_+100)/100,De=h/100,Oe=k/10,Ve=W/100,te=(N+100)/100,ze=(U.brightness??0)/100+1,ae=(U.contrast??0)/100+1,Ye=(U.saturate??0)/100+1,fe=U.hueRotate??0,je=(U.shadows??0)/100+1,Qe=(U.vignette??0)/10,lt=(U.highlights??0)/100+1,ve=1+(ze-1)*q,Je=1+(ae-1)*q,ye=1+(Ye-1)*q,Ze=1+(je-1)*q,Ae=Qe*q,Ke=1+(lt-1)*q,ce=Math.min(2,pe*ve),be=$e*Je,n=Xe*ye,ue=Le,xe=he*Ze,st=De,ct=Oe+Ae,ut=Ve,gt=te*Ke,dt=new Float32Array([i,0,0,0,0,d,0,0,0,0,s,0,0,0,0,1]);let Pe=dt;if(U.colorMatrix&&q>0){const p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=new Float32Array(16);for(let x=0;x<16;x++)t[x]=p[x]+(U.colorMatrix[x]-p[x])*q;Pe=Ga(dt,t)}const mt=o.useMemo(()=>new Float32Array(Pe),[Pe]),pt=o.useMemo(()=>new Float32Array([0,0,0,0]),[]),jt=`
    attribute vec2 a_position;
    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;
    uniform mat3 u_texMatrix;
    void main() {
      gl_Position = vec4(a_position, 0, 1);
      v_texCoord = (u_texMatrix * vec3(a_texCoord, 1)).xy;
    }
  `,Qt=`
    precision highp float;
    uniform sampler2D u_image;
    uniform sampler2D u_gradient;
    uniform mat4 u_colorMatrix;
    uniform vec4 u_bias;
    uniform float u_brightness;
    uniform float u_contrast;
    uniform float u_saturation;
    uniform float u_hue;
    uniform float u_presetHue;
    uniform float u_intensity;
    uniform float u_vignette;
    uniform float u_shadows;
    uniform float u_grainIntensity;
    uniform float u_sharpness;
    uniform float u_highlights;
    uniform vec4 u_canvasColor;
    uniform vec2 u_resolution;
    uniform int u_hasGradient;
    varying vec2 v_texCoord;

    // Functions for color operations
    vec3 rgb2yiq(vec3 color) {
      return vec3(
        dot(color, vec3(0.299, 0.587, 0.114)),
        dot(color, vec3(0.596, -0.274, -0.322)),
        dot(color, vec3(0.211, -0.523, 0.312))
      );
    }
    vec3 yiq2rgb(vec3 yiq) {
      return vec3(
        yiq.x + 0.956 * yiq.y + 0.621 * yiq.z,
        yiq.x - 0.272 * yiq.y - 0.647 * yiq.z,
        yiq.x - 1.106 * yiq.y + 1.703 * yiq.z
      );
    }

vec3 rgb2hsl(vec3 color) {
  float maxC = max(color.r, max(color.g, color.b));
  float minC = min(color.r, min(color.g, color.b));
  float delta = maxC - minC;
  float h = 0.0;
  float s = 0.0;
  float l = (maxC + minC) / 2.0;
  
  if (delta != 0.0) {
    s = l < 0.5 ? (delta / (maxC + minC)) : (delta / (2.0 - maxC - minC));
    if (maxC == color.r)
      h = (color.g - color.b) / delta + (color.g < color.b ? 6.0 : 0.0);
    else if (maxC == color.g)
      h = (color.b - color.r) / delta + 2.0;
    else
      h = (color.r - color.g) / delta + 4.0;
    h /= 6.0;
  }
  return vec3(h, s, l);
}

float hue2rgb(float p, float q, float t) {
  if (t < 0.0) t += 1.0;
  if (t > 1.0) t -= 1.0;
  if (t < 1.0/6.0) return p + (q - p) * 6.0 * t;
  if (t < 1.0/2.0) return q;
  if (t < 2.0/3.0) return p + (q - p) * (2.0/3.0 - t) * 6.0;
  return p;
}


vec3 hsl2rgb(vec3 hsl) {
  float r, g, b;
  if (hsl.y == 0.0) {
    r = g = b = hsl.z;
  } else {
    float q = hsl.z < 0.5 ? hsl.z * (1.0 + hsl.y) : hsl.z + hsl.y - hsl.z * hsl.y;
    float p = 2.0 * hsl.z - q;
    r = hue2rgb(p, q, hsl.x + 1.0/3.0);
    g = hue2rgb(p, q, hsl.x);
    b = hue2rgb(p, q, hsl.x - 1.0/3.0);
  }
  return vec3(r, g, b);
}

vec3 adjustHueHSL(vec3 color, float hueRotation) {
  vec3 hsl = rgb2hsl(color);
  hsl.x = mod(hsl.x + hueRotation, 1.0);
  return hsl2rgb(hsl);
}
    float random(vec2 st) {
      return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
    }

    void main() {
      vec2 texSize = u_resolution;
      vec2 cropCoord = v_texCoord;
      vec4 origColor = texture2D(u_image, cropCoord);
      
      // Always apply colorMatrix (userMatrix * presetMatrix)
      vec4 color = u_colorMatrix * origColor + u_bias;
      
      // Then all other filters
      color.rgb = clamp(color.rgb * u_brightness, 0.0, 1.0);
      color.rgb = ((color.rgb - 0.5) * u_contrast) + 0.5;
      float gray = dot(color.rgb, vec3(0.2126, 0.7152, 0.0722));
      color.rgb = mix(vec3(gray), color.rgb, u_saturation);
      
      // Always apply user hue first
      color.rgb = adjustHueHSL(color.rgb, u_hue);
      
      // If there's a preset hue, mix result with hue-filter by intensity
      if (u_presetHue != 0.0) {
        vec3 hueApplied = adjustHueHSL(color.rgb, u_presetHue);
        color.rgb = mix(color.rgb, hueApplied, u_intensity);
      }
      
      float dist = distance(v_texCoord, vec2(0.5, 0.5));
      float vig = smoothstep(0.3, 0.9, dist);
      color.rgb = mix(color.rgb, color.rgb * (1.0 - vig), u_vignette);
      
      float lum = dot(color.rgb, vec3(0.299, 0.587, 0.114));
      float shadowFactor = mix(u_shadows, 1.0, smoothstep(0.0, 0.5, lum));
      float highlightFactor = mix(1.0, u_highlights, smoothstep(0.5, 1.0, lum));
      color.rgb *= shadowFactor * highlightFactor;
      
      float noise = (random(v_texCoord) - 0.5) * (u_grainIntensity / max(u_brightness, 0.1));
      color.rgb = clamp(color.rgb + noise, 0.0, 1.0);
      
      if (u_sharpness > 0.0) {
        vec2 texel = 1.0 / u_resolution;
        vec4 north = texture2D(u_image, v_texCoord + vec2(0.0, texel.y));
        vec4 south = texture2D(u_image, v_texCoord - vec2(0.0, texel.y));
        vec4 east  = texture2D(u_image, v_texCoord + vec2(texel.x, 0.0));
        vec4 west  = texture2D(u_image, v_texCoord - vec2(texel.x, 0.0));
        vec4 sharpened = color * (1.0 + 4.0 * u_sharpness) - (north + south + east + west) * u_sharpness;
        color = clamp(sharpened, 0.0, 1.0);
      }
      
      color.rgb = clamp(color.rgb, 0.0, 1.0);

      // Apply gradient
      if (u_hasGradient == 1) {
        vec4 gradColor = texture2D(u_gradient, v_texCoord);
        // Mix with gradient, using gradient alpha channel
        color.rgb = mix(color.rgb, gradColor.rgb, gradColor.a);
      }
     
      // Apply canvas color
      color.rgb = mix(color.rgb, u_canvasColor.rgb, u_canvasColor.a);
      
      gl_FragColor = color;
    }
  `,ht=()=>{if(A(!1),!b){S(null),A(!0);return}if(!w.current||!w.current.naturalWidth){S(null),A(!0);return}const p=w.current.naturalWidth,t=w.current.naturalHeight;if(H&&Ie.current===b&&se.current===p&&Be.current===t){A(!0);return}Ie.current=b,se.current=p,Be.current=t;const x=Na(p,t,b);S(x),A(!0)};o.useEffect(()=>{b?ht():(S(null),A(!0))},[b,a,me,v]),o.useEffect(()=>{if(S(null),A(!1),!a)return;const p=w.current;p.crossOrigin="anonymous",p.src=a;const t=()=>{b?ht():(S(null),A(!0))};return p.complete&&p.naturalWidth>0?t():p.onload=t,()=>{p.onload=null}},[]),o.useEffect(()=>{ka()},[a]),o.useEffect(()=>{const p=K.current;if(!p)return;const t=p.getContext("webgl",{preserveDrawingBuffer:!0});if(!t){console.error("WebGL not supported");return}let x=null,D=null,j=0,O=0;function ge(Q){p&&(j=Q.naturalWidth,O=Q.naturalHeight,p.width=(m==null?void 0:m.width)??j,p.height=(m==null?void 0:m.height)??O)}async function Me(){!t||!p||(w.current.crossOrigin="anonymous",w.current.src=a,w.current.onload=async()=>{ge(w.current);let Q=!!b&&H;const V=(B,L)=>{console.log("createShader");const ne=t.createShader(B);return ne?(t.shaderSource(ne,L),t.compileShader(ne),t.getShaderParameter(ne,t.COMPILE_STATUS)?ne:(console.error("Shader compile error:",t.getShaderInfoLog(ne)),t.deleteShader(ne),null)):null},de=V(t.VERTEX_SHADER,jt),Ne=V(t.FRAGMENT_SHADER,Qt);if(!de||!Ne)return;const c=t.createProgram();if(!c)return;if(t.attachShader(c,de),t.attachShader(c,Ne),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS)){console.error("Program link error:",t.getProgramInfoLog(c));return}t.useProgram(c);const ft=t.getAttribLocation(c,"a_position"),vt=t.getAttribLocation(c,"a_texCoord"),Kt=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,Kt);const ea=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);t.bufferData(t.ARRAY_BUFFER,ea,t.STATIC_DRAW),t.enableVertexAttribArray(ft),t.vertexAttribPointer(ft,2,t.FLOAT,!1,0,0);const ta=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,ta);const aa=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);t.bufferData(t.ARRAY_BUFFER,aa,t.STATIC_DRAW),t.enableVertexAttribArray(vt),t.vertexAttribPointer(vt,2,t.FLOAT,!1,0,0),D=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,D),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,w.current),Q&&H?(x=t.createTexture(),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,x),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,H)):console.log("❌ Gradient texture not created:",{hasGradient:Q,gradCanvas:!!H});const ra=t.getUniformLocation(c,"u_colorMatrix"),na=t.getUniformLocation(c,"u_bias"),oa=t.getUniformLocation(c,"u_brightness"),ia=t.getUniformLocation(c,"u_contrast"),la=t.getUniformLocation(c,"u_saturation"),sa=t.getUniformLocation(c,"u_hue"),ca=t.getUniformLocation(c,"u_presetHue"),ua=t.getUniformLocation(c,"u_vignette"),ga=t.getUniformLocation(c,"u_shadows"),da=t.getUniformLocation(c,"u_grainIntensity"),ma=t.getUniformLocation(c,"u_sharpness"),pa=t.getUniformLocation(c,"u_intensity"),ha=t.getUniformLocation(c,"u_highlights"),fa=t.getUniformLocation(c,"u_canvasColor"),va=t.getUniformLocation(c,"u_hasGradient"),ya=t.getUniformLocation(c,"u_resolution");t.uniformMatrix4fv(ra,!1,mt),t.uniform4fv(na,pt),t.uniform1f(oa,ce),t.uniform1f(ia,be),t.uniform1f(la,n),t.uniform1f(sa,ue),t.uniform1f(ca,fe/360),t.uniform1f(ua,ct),t.uniform1f(ga,xe),t.uniform1f(da,st),t.uniform1f(ma,ut),t.uniform1f(pa,q),t.uniform1f(ha,gt),t.uniform4f(fa,((g==null?void 0:g.r)??0)/255,((g==null?void 0:g.g)??0)/255,((g==null?void 0:g.b)??0)/255,((g==null?void 0:g.a)??0)/100),t.uniform1i(va,Q?1:0),t.uniform2f(ya,j,O);const ba=(m==null?void 0:m.x)??0,xa=(m==null?void 0:m.y)??0,et=(m==null?void 0:m.width)??j,ke=(m==null?void 0:m.height)??O;let tt=1,at=1;v==="horizontal"&&(tt=-1),v==="vertical"&&(at=-1);const yt=ba/j,bt=(O-xa-ke)/O,rt=ke/O,nt=et/j,Ca=tt===-1?1:0,Ea=at===-1?1:0;let xt=(oe??0)*Math.PI/180,Ct=Math.cos(xt),Et=Math.sin(xt);const wt=yt+nt/2,St=bt+rt/2;let wa=[nt*tt,0,0,0,rt*at,0,yt+Ca*nt,bt+Ea*rt,1];function ot(B,L){return[B[0]*L[0]+B[1]*L[3],B[0]*L[1]+B[1]*L[4],0,B[3]*L[0]+B[4]*L[3],B[3]*L[1]+B[4]*L[4],0,B[6]*L[0]+B[7]*L[3]+L[6],B[6]*L[1]+B[7]*L[4]+L[7],1]}const Sa=[1,0,0,0,1,0,-wt,-St,1],Ta=[Ct,-Et,0,Et,Ct,0,0,0,1],Ra=[1,0,0,0,1,0,wt,St,1];let re=wa;re=ot(re,Sa),re=ot(re,Ta),re=ot(re,Ra);const _a=t.getUniformLocation(c,"u_texMatrix");t.uniformMatrix3fv(_a,!1,re);const Fa=t.getUniformLocation(c,"u_image");if(t.uniform1i(Fa,0),Q&&x){const B=t.getUniformLocation(c,"u_gradient");t.uniform1i(B,1)}p.width=et,p.height=ke,t.viewport(0,0,et,ke),t.drawArrays(t.TRIANGLES,0,6)})}b&&!z||Me()},[a,y,u,G,C,k,mt,pt,ce,be,n,ue,xe,st,ct,ut,I,r,gt,g,b,H,z,m,v,oe]),o.useEffect(()=>{console.log("saveImage",R);const p=K.current;!p||!R||setTimeout(()=>{if(!w.current.complete||w.current.naturalWidth===0||w.current.naturalHeight===0){console.error(" 'Not Found'.");return}const t=p.getContext("webgl",{preserveDrawingBuffer:!0});if(!t)return;const x=p.width,D=p.height,j=new Uint8Array(x*D*4);t.readPixels(0,0,x,D,t.RGBA,t.UNSIGNED_BYTE,j);const O=new Uint8Array(x*D*4);for(let V=0;V<D;V++){const de=V*x*4,Ne=(D-V-1)*x*4;for(let c=0;c<x*4;c++)O[Ne+c]=j[de+c]}const ge=document.createElement("canvas");ge.width=x,ge.height=D;const Me=ge.getContext("2d");if(!Me)return;const Q=new ImageData(new Uint8ClampedArray(O),x,D);Me.putImageData(Q,0,0),ge.toBlob(V=>{if(V){console.log("📸 Image saved!");const de=new File([V],"filtered-image.png",{type:"image/png"});R(de)}},"image/png")},100)},[r,ie,l,T,P,Y,$,X,le,J,Ue,Fe,We,Ge,qe,me,v]);const Jt=`brightness(${ce*100}%) 
    contrast(${be*100}%) 
    saturate(${n*100}%)
     hue-rotate(${ue*360}deg)`,Zt=Ia(Pe);return f?e.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},e.createElement("svg",{width:"1",height:"1"},e.createElement("filter",{id:ee,colorInterpolationFilters:"sRGB"},e.createElement("feColorMatrix",{type:"matrix",values:Zt}))),e.createElement("img",{crossOrigin:"anonymous",key:ee,src:a,alt:"Filtered",style:{filter:`url(#${ee}) ${Jt}`,width:"100%",height:"100%",...E}})):(console.log("crop",m),e.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative",objectFit:"cover"}},e.createElement("canvas",{ref:K,style:{display:"block",border:"1px solid yellow",width:"100%",height:"100%",objectFit:"cover"}})))};function Ha(a,r){return!a&&!r?!0:!a||!r?!1:a.r===r.r&&a.g===r.g&&a.b===r.b&&a.a===r.a}function Ua(a,r){return!a&&!r?!0:!a||!r?!1:a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height}const Wa=(a,r)=>a.imageUrl===r.imageUrl&&a.filter===r.filter&&a.redChannel===r.redChannel&&a.greenChannel===r.greenChannel&&a.blueChannel===r.blueChannel&&a.brightness===r.brightness&&a.contrast===r.contrast&&a.saturation===r.saturation&&a.hueRotate===r.hueRotate&&a.vignette===r.vignette&&a.shadows===r.shadows&&a.grain===r.grain&&a.filterIntensity===r.filterIntensity&&a.sharpness===r.sharpness&&a.preview===r.preview&&a.highlights===r.highlights&&Ha(a.canvasColor,r.canvasColor)&&a.gradient===r.gradient&&a.flip===r.flip&&a.rotate===r.rotate&&Ua(a.crop,r.crop),Z=e.memo(Yt,Wa);Yt.__docgenInfo={description:"",methods:[],displayName:"WebGLImageFilter",props:{imageUrl:{required:!0,tsType:{name:"string"},description:""},filter:{required:!1,tsType:{name:"string"},description:""},redChannel:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},greenChannel:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},blueChannel:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},brightness:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},contrast:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},saturation:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},hueRotate:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},vignette:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},shadows:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},grain:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},filterIntensity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},sharpness:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},styles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},saveImage:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},preview:{required:!1,tsType:{name:"boolean"},description:""},highlights:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},canvasColor:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    r:number,
    g:number,
    b:number,
    a:number
}`,signature:{properties:[{key:"r",value:{name:"number",required:!0}},{key:"g",value:{name:"number",required:!0}},{key:"b",value:{name:"number",required:!0}},{key:"a",value:{name:"number",required:!0}}]}},description:""},gradient:{required:!1,tsType:{name:"string"},description:""},crop:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: number; y: number; width: number; height: number }",signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}},{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},description:""},flip:{required:!1,tsType:{name:"string"},description:""},rotate:{required:!1,tsType:{name:"number"},description:""}}};const Xa={title:"ImageFilters",component:Z,parameters:{controls:{expanded:!0}}},qa=a=>e.createElement(Z,{...a}),Ce=qa.bind({});Ce.args={saveImage:()=>{console.log("saveImage")},canvasColor:{r:255,g:255,b:255,a:100},imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png"};const Ee=()=>{const[a,r]=o.useState(0);return e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{htmlFor:"brightness-slider",style:{display:"block",marginBottom:"10px"}},"Brightness: ",a),e.createElement("input",{id:"brightness-slider",type:"range",min:"-100",max:"100",value:a,onChange:i=>r(Number(i.target.value)),style:{width:"300px"}})),e.createElement("div",{style:{width:"500px",height:"400px",border:"1px solid #ccc"}},e.createElement(Z,{imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png",brightness:a,saveImage:i=>console.log("saveImage",i)})))},we=()=>{const[a,r]=o.useState(0);return e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",{htmlFor:"brightness-slider-gradient",style:{display:"block",marginBottom:"10px"}},"Brightness: ",a),e.createElement("input",{id:"brightness-slider-gradient",type:"range",min:"-100",max:"100",value:a,onChange:i=>r(Number(i.target.value)),style:{width:"300px"}})),e.createElement("div",{style:{width:"500px",height:"400px",border:"1px solid #ccc"}},e.createElement(Z,{imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png",brightness:a,gradient:"linear-gradient(45deg, #ff0000, #00ff00, #0000ff)",saveImage:i=>console.log("saveImage",i)})))},Se=()=>{const[a,r]=o.useState(0),[i,d]=o.useState("#ff0000"),[s,y]=o.useState("#00ff00"),[u,G]=o.useState("#0000ff"),[C,k]=o.useState(45),_=`linear-gradient(${C}deg, ${i}, ${s}, ${u})`;return e.createElement("div",{style:{padding:"20px"}},e.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"20px",flexWrap:"wrap"}},e.createElement("div",null,e.createElement("label",{htmlFor:"brightness-slider-fast",style:{display:"block",marginBottom:"5px"}},"Brightness: ",a),e.createElement("input",{id:"brightness-slider-fast",type:"range",min:"-100",max:"100",value:a,onChange:h=>r(Number(h.target.value)),style:{width:"200px"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"angle-slider",style:{display:"block",marginBottom:"5px"}},"Angle: ",C,"°"),e.createElement("input",{id:"angle-slider",type:"range",min:"0",max:"360",value:C,onChange:h=>k(Number(h.target.value)),style:{width:"200px"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"color1",style:{display:"block",marginBottom:"5px"}},"Color 1:"),e.createElement("input",{id:"color1",type:"color",value:i,onChange:h=>d(h.target.value),style:{width:"50px",height:"30px"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"color2",style:{display:"block",marginBottom:"5px"}},"Color 2:"),e.createElement("input",{id:"color2",type:"color",value:s,onChange:h=>y(h.target.value),style:{width:"50px",height:"30px"}})),e.createElement("div",null,e.createElement("label",{htmlFor:"color3",style:{display:"block",marginBottom:"5px"}},"Color 3:"),e.createElement("input",{id:"color3",type:"color",value:u,onChange:h=>G(h.target.value),style:{width:"50px",height:"30px"}}))),e.createElement("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"}},e.createElement("strong",null,"Current gradient:")," ",_),e.createElement("div",{style:{width:"500px",height:"400px",border:"1px solid #ccc"}},e.createElement(Z,{imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png",brightness:a,gradient:_,saveImage:h=>console.log("saveImage",h)})))},Te=()=>{const[a,r]=o.useState(0),[i,d]=o.useState(0),[s,y]=o.useState(0),[u,G]=o.useState(0),[C,k]=o.useState("linear"),[_,h]=o.useState(45),[I,W]=o.useState("#ff0000"),[R,E]=o.useState("#00ff00"),[f,N]=o.useState("#0000ff"),[g,b]=o.useState(100),[v,oe]=o.useState(100),[m,K]=o.useState(100),[w,H]=o.useState([]),[S,z]=o.useState(!1),A=()=>{const l=I+Math.floor(g*2.55).toString(16).padStart(2,"0"),T=R+Math.floor(v*2.55).toString(16).padStart(2,"0"),P=f+Math.floor(m*2.55).toString(16).padStart(2,"0");return C==="linear"?`linear-gradient(${_}deg, ${l}, ${T}, ${P})`:`radial-gradient(circle, ${l}, ${T}, ${P})`},ee=()=>{z(!0),H([]);const l=performance.now();let T=0;const P=20,Y=setInterval(()=>{if(h(T*18),T++,T>=P){clearInterval(Y);const $=performance.now()-l,X=$/P;H(["✅ Performance test completed",`📊 ${P} angle changes in ${$.toFixed(2)}ms`,`⚡ Average time: ${X.toFixed(2)}ms per change`,`🎯 FPS: ${(1e3/X).toFixed(1)}`,"💾 Gradient caching works"]),z(!1)}},50)},ie=()=>{z(!0),H([]);const l=performance.now(),T=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"];let P=0,Y=0;const $=30,X=setInterval(()=>{if(W(T[P%T.length]),E(T[(P+1)%T.length]),N(T[(P+2)%T.length]),P++,Y++,Y>=$){clearInterval(X);const le=performance.now()-l,J=le/$;H(["✅ Color change test completed",`📊 ${$} color changes in ${le.toFixed(2)}ms`,`⚡ Average time: ${J.toFixed(2)}ms per change`,`🎯 FPS: ${(1e3/J).toFixed(1)}`,"🎨 Gradient updates smoothly"]),z(!1)}},30)};return e.createElement("div",{style:{padding:"20px"}},e.createElement("h2",{style:{marginBottom:"20px",color:"#333"}},"🧪 Gradient Tester"),e.createElement("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},e.createElement("h3",{style:{marginBottom:"15px",color:"#555"}},"Image Filters"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",null,"Brightness: ",a),e.createElement("input",{type:"range",min:"-100",max:"100",value:a,onChange:l=>r(Number(l.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Contrast: ",i),e.createElement("input",{type:"range",min:"-100",max:"100",value:i,onChange:l=>d(Number(l.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Saturation: ",s),e.createElement("input",{type:"range",min:"-100",max:"100",value:s,onChange:l=>y(Number(l.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Hue: ",u,"°"),e.createElement("input",{type:"range",min:"0",max:"360",value:u,onChange:l=>G(Number(l.target.value)),style:{width:"100%"}})))),e.createElement("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#e7f3ff",borderRadius:"8px"}},e.createElement("h3",{style:{marginBottom:"15px",color:"#555"}},"Gradient Settings"),e.createElement("div",{style:{marginBottom:"15px"}},e.createElement("label",null,"Gradient type:"),e.createElement("select",{value:C,onChange:l=>k(l.target.value),style:{marginLeft:"10px",padding:"5px",borderRadius:"4px"}},e.createElement("option",{value:"linear"},"Linear"),e.createElement("option",{value:"radial"},"Radial"))),C==="linear"&&e.createElement("div",{style:{marginBottom:"15px"}},e.createElement("label",null,"Angle: ",_,"°"),e.createElement("input",{type:"range",min:"0",max:"360",value:_,onChange:l=>h(Number(l.target.value)),style:{width:"300px",marginLeft:"10px"}})),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"}},e.createElement("div",null,e.createElement("label",null,"Color 1:"),e.createElement("input",{type:"color",value:I,onChange:l=>W(l.target.value),style:{marginLeft:"5px",width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:g,onChange:l=>b(Number(l.target.value)),style:{width:"100px",marginLeft:"5px"}}),e.createElement("span",{style:{fontSize:"12px"}},g,"%")),e.createElement("div",null,e.createElement("label",null,"Color 2:"),e.createElement("input",{type:"color",value:R,onChange:l=>E(l.target.value),style:{marginLeft:"5px",width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:v,onChange:l=>oe(Number(l.target.value)),style:{width:"100px",marginLeft:"5px"}}),e.createElement("span",{style:{fontSize:"12px"}},v,"%")),e.createElement("div",null,e.createElement("label",null,"Color 3:"),e.createElement("input",{type:"color",value:f,onChange:l=>N(l.target.value),style:{marginLeft:"5px",width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:m,onChange:l=>K(Number(l.target.value)),style:{width:"100px",marginLeft:"5px"}}),e.createElement("span",{style:{fontSize:"12px"}},m,"%")))),e.createElement("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f0f0f0",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px"}},e.createElement("strong",null,"CSS gradient:")," ",A()),e.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"}},e.createElement("button",{onClick:ee,disabled:S,style:{padding:"10px 20px",backgroundColor:S?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:S?"not-allowed":"pointer"}},S?"Testing...":"Performance Test"),e.createElement("button",{onClick:ie,disabled:S,style:{padding:"10px 20px",backgroundColor:S?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:S?"not-allowed":"pointer"}},S?"Testing...":"Color Change Test")),w.length>0&&e.createElement("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#d4edda",borderRadius:"8px",border:"1px solid #c3e6cb"}},e.createElement("h4",{style:{marginBottom:"10px",color:"#155724"}},"📊 Test Results"),w.map((l,T)=>e.createElement("div",{key:T,style:{marginBottom:"5px",fontFamily:"monospace",fontSize:"14px"}},l))),e.createElement("div",{style:{width:"600px",height:"400px",border:"2px solid #ddd",borderRadius:"8px",overflow:"hidden"}},e.createElement(Z,{imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png",brightness:a,contrast:i,saturation:s,hueRotate:u,gradient:A(),saveImage:l=>console.log("saveImage",l)})),e.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7"}},e.createElement("h4",{style:{marginBottom:"10px",color:"#856404"}},"📋 Test Instructions"),e.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#856404"}},e.createElement("li",null,"Use sliders to change image filters"),e.createElement("li",null,"Set up gradient: select type, angle, colors, and opacity"),e.createElement("li",null,"Run performance tests to check speed"),e.createElement("li",null,"Watch results in real time"),e.createElement("li",null,"Ensure gradient applies without delay"))))},Re=()=>{const[a,r]=o.useState(0),[i,d]=o.useState(0),s=[{name:"Working gradient (hex with alpha)",gradient:"linear-gradient(43deg, #a87171fe, #00ff00fe, #656576fe)"},{name:"Problem gradient (rgba with percentages)",gradient:"linear-gradient(159deg,rgba(235, 0, 125, 1) 0%, rgba(0, 0, 0, 0.73) 100%)"},{name:"Simple rgba gradient",gradient:"linear-gradient(45deg, rgba(255, 0, 0, 0.8), rgba(0, 255, 0, 0.6))"},{name:"Gradient with different positions",gradient:"linear-gradient(90deg, rgba(255, 0, 0, 1) 0%, rgba(0, 255, 0, 0.5) 50%, rgba(0, 0, 255, 0.8) 100%)"}],y=s[i];return e.createElement("div",{style:{padding:"20px"}},e.createElement("h2",{style:{marginBottom:"20px",color:"#333"}},"🧪 Test Specific Gradients"),e.createElement("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},e.createElement("h3",{style:{marginBottom:"15px",color:"#555"}},"Select gradient for testing"),e.createElement("select",{value:i,onChange:u=>d(Number(u.target.value)),style:{padding:"8px",borderRadius:"4px",width:"100%",marginBottom:"10px"}},s.map((u,G)=>e.createElement("option",{key:G,value:G},u.name))),e.createElement("div",{style:{padding:"10px",backgroundColor:"#f0f0f0",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px"}},e.createElement("strong",null,"Current gradient:"),e.createElement("br",null),y.gradient)),e.createElement("div",{style:{marginBottom:"20px"}},e.createElement("label",null,"Brightness: ",a),e.createElement("input",{type:"range",min:"-100",max:"100",value:a,onChange:u=>r(Number(u.target.value)),style:{width:"300px",marginLeft:"10px"}})),e.createElement("div",{style:{width:"600px",height:"400px",border:"2px solid #ddd",borderRadius:"8px",overflow:"hidden"}},e.createElement(Z,{imageUrl:"https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png",brightness:a,gradient:y.gradient,saveImage:u=>console.log("saveImage",u)})),e.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7"}},e.createElement("h4",{style:{marginBottom:"10px",color:"#856404"}},"🔍 Debugging"),e.createElement("p",{style:{color:"#856404",margin:0}},"Open browser console (F12) and check logs. Should be messages about gradient creation and its application."),e.createElement("ul",{style:{margin:"10px 0 0 0",paddingLeft:"20px",color:"#856404"}},e.createElement("li",null,"Check that gradient is created without errors"),e.createElement("li",null,"Ensure that color positions are parsed correctly"),e.createElement("li",null,"Watch gradient application messages in WebGL"))))},_e=()=>{const[a,r]=o.useState(0),[i,d]=o.useState(0),[s,y]=o.useState(0),[u,G]=o.useState(0),[C,k]=o.useState(0),[_,h]=o.useState(0),[I,W]=o.useState(0),[R,E]=o.useState(0),[f,N]=o.useState(0),[g,b]=o.useState(1),[v,oe]=o.useState(1),[m,K]=o.useState(1),[w,H]=o.useState(1),[S,z]=o.useState("#ffffff"),[A,ee]=o.useState(0),[ie,l]=o.useState("none"),[T,P]=o.useState(!1),[Y,$]=o.useState("https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png"),[X,le]=o.useState("linear"),[J,Ue]=o.useState(45),[Fe,We]=o.useState("#ff0000"),[Ge,qe]=o.useState("#00ff00"),[me,Ie]=o.useState("#0000ff"),[se,Be]=o.useState(100),[U,q]=o.useState(100),[pe,$e]=o.useState(100),[Xe,Le]=o.useState("none"),[he,De]=o.useState(0),Oe=["none","static","frequency","broadcast","retro","transistor","jazz","classic","naight8","alpine","tokyo","bw","vintage","cool","warm","custom"],Ve=()=>{const n=Fe+Math.floor(se*2.55).toString(16).padStart(2,"0"),ue=Ge+Math.floor(U*2.55).toString(16).padStart(2,"0"),xe=me+Math.floor(pe*2.55).toString(16).padStart(2,"0");return X==="linear"?`linear-gradient(${J}deg, ${n}, ${ue}, ${xe})`:`radial-gradient(circle, ${n}, ${ue}, ${xe})`},[te,ze]=o.useState(1024),[ae,Ye]=o.useState(768),[fe,je]=o.useState(0),[Qe,lt]=o.useState(0),[ve,Je]=o.useState(0),[ye,Ze]=o.useState(0),[Ae,Ke]=o.useState(496),[ce,be]=o.useState(768);return e.createElement("div",{style:{padding:20}},e.createElement("h2",null,"🧪 FullPropsTester: All ImageFilters props"),"\\",e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:20,marginBottom:30}},e.createElement("div",null,e.createElement("label",null,"Brightness: ",a),e.createElement("input",{type:"range",min:"-100",max:"100",value:a,onChange:n=>r(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Contrast: ",i),e.createElement("input",{type:"range",min:"-100",max:"100",value:i,onChange:n=>d(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Saturation: ",s),e.createElement("input",{type:"range",min:"-100",max:"100",value:s,onChange:n=>y(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Hue: ",u,"°"),e.createElement("input",{type:"range",min:"0",max:"360",value:u,onChange:n=>G(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Sharpness: ",C),e.createElement("input",{type:"range",min:"0",max:"100",value:C,onChange:n=>k(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Highlights: ",_),e.createElement("input",{type:"range",min:"-100",max:"100",value:_,onChange:n=>h(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Shadows: ",I),e.createElement("input",{type:"range",min:"-100",max:"100",value:I,onChange:n=>W(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Vignette: ",R),e.createElement("input",{type:"range",min:"0",max:"100",value:R,onChange:n=>E(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Grain: ",f),e.createElement("input",{type:"range",min:"0",max:"100",value:f,onChange:n=>N(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Filter intensity: ",g),e.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:g,onChange:n=>b(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Red Channel: ",v),e.createElement("input",{type:"range",min:"0",max:"2",step:"0.01",value:v,onChange:n=>oe(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Green Channel: ",m),e.createElement("input",{type:"range",min:"0",max:"2",step:"0.01",value:m,onChange:n=>K(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Blue Channel: ",w),e.createElement("input",{type:"range",min:"0",max:"2",step:"0.01",value:w,onChange:n=>H(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",null,e.createElement("label",null,"Canvas Color:"),e.createElement("input",{type:"color",value:S,onChange:n=>z(n.target.value),style:{width:"60px",height:"30px",marginLeft:8}}),e.createElement("label",{style:{marginLeft:8}},"Alpha: ",A),e.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:A,onChange:n=>ee(Number(n.target.value)),style:{width:"80px",marginLeft:8}})),e.createElement("div",{style:{gridColumn:"1/-1",background:"#e7f3ff",borderRadius:8,padding:16,marginBottom:10}},e.createElement("h4",null,"Gradient"),e.createElement("div",{style:{marginBottom:10}},e.createElement("label",null,"Gradient type:"),e.createElement("select",{value:X,onChange:n=>le(n.target.value),style:{marginLeft:10}},e.createElement("option",{value:"linear"},"Linear"),e.createElement("option",{value:"radial"},"Radial"))),X==="linear"&&e.createElement("div",{style:{marginBottom:10}},e.createElement("label",null,"Angle: ",J,"°"),e.createElement("input",{type:"range",min:"0",max:"360",value:J,onChange:n=>Ue(Number(n.target.value)),style:{width:"200px",marginLeft:10}})),e.createElement("div",{style:{display:"flex",gap:20,flexWrap:"wrap"}},e.createElement("div",null,e.createElement("label",null,"Color 1:"),e.createElement("input",{type:"color",value:Fe,onChange:n=>We(n.target.value),style:{marginLeft:8,width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:se,onChange:n=>Be(Number(n.target.value)),style:{width:"100px",marginLeft:8}}),e.createElement("span",{style:{fontSize:"12px"}},se,"%")),e.createElement("div",null,e.createElement("label",null,"Color 2:"),e.createElement("input",{type:"color",value:Ge,onChange:n=>qe(n.target.value),style:{marginLeft:8,width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:U,onChange:n=>q(Number(n.target.value)),style:{width:"100px",marginLeft:8}}),e.createElement("span",{style:{fontSize:"12px"}},U,"%")),e.createElement("div",null,e.createElement("label",null,"Color 3:"),e.createElement("input",{type:"color",value:me,onChange:n=>Ie(n.target.value),style:{marginLeft:8,width:"40px",height:"30px"}}),e.createElement("input",{type:"range",min:"0",max:"100",value:pe,onChange:n=>$e(Number(n.target.value)),style:{width:"100px",marginLeft:8}}),e.createElement("span",{style:{fontSize:"12px"}},pe,"%"))),e.createElement("div",{style:{marginTop:10,fontFamily:"monospace",fontSize:13,background:"#f0f0f0",borderRadius:4,padding:8}},e.createElement("strong",null,"CSS gradient:")," ",Ve())),e.createElement("div",null,e.createElement("label",null,"Filter:"),e.createElement("select",{value:ie,onChange:n=>l(n.target.value),style:{width:"100%"}},Oe.map(n=>e.createElement("option",{key:n,value:n},n)))),e.createElement("div",null,e.createElement("label",null,"Preview:"),e.createElement("input",{type:"checkbox",checked:T,onChange:n=>P(n.target.checked),style:{marginLeft:8}})),e.createElement("div",null,e.createElement("label",null,"Image URL:"),e.createElement("input",{type:"text",value:Y,onChange:n=>$(n.target.value),style:{width:"100%"}}))),e.createElement("div",{style:{marginBottom:20,display:"flex",gap:20,flexDirection:"column"}},e.createElement("div",null,e.createElement("label",null,"Position X: ",fe,"px"),e.createElement("input",{type:"range",min:"-100",max:"100",value:fe,onChange:n=>je(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Width: ",te,"px"),e.createElement("input",{type:"range",min:"100",max:"1000",value:te,onChange:n=>ze(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Height: ",ae,"px"),e.createElement("input",{type:"range",min:"100",max:"1000",value:ae,onChange:n=>Ye(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Crop X: ",ve,"px"),e.createElement("input",{type:"range",min:-te+10,max:te-10,value:ve,onChange:n=>Je(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Crop Y: ",ye,"px"),e.createElement("input",{type:"range",min:-ae+10,max:ae-10,value:ye,onChange:n=>Ze(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Crop Width: ",Ae,"px"),e.createElement("input",{type:"range",min:"10",max:te-ve,value:Ae,onChange:n=>Ke(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Crop Height: ",ce,"px"),e.createElement("input",{type:"range",min:"10",max:ae-ye,value:ce,onChange:n=>be(Number(n.target.value)),style:{width:200}})),e.createElement("div",null,e.createElement("label",null,"Flip:"),e.createElement("button",{onClick:()=>Le("horizontal")},"Horizontal"),e.createElement("button",{onClick:()=>Le("vertical")},"Vertical"))),e.createElement("div",null,e.createElement("label",null,"Rotate: ",he,"°"),e.createElement("input",{type:"range",min:"0",max:"360",value:he,onChange:n=>De(Number(n.target.value)),style:{width:"100%"}})),e.createElement("div",{style:{backgroundColor:"red",height:"600px",width:"900px",border:"2px solid #ddd",borderRadius:8,overflow:"hidden",margin:"0 auto",position:"relative",left:fe,top:Qe}},e.createElement(Z,{imageUrl:Y,brightness:a,contrast:i,saturation:s,hueRotate:u,sharpness:C,highlights:_,shadows:I,vignette:R,grain:f,filterIntensity:g*100,redChannel:v,greenChannel:m,blueChannel:w,canvasColor:{r:parseInt(S.slice(1,3),16),g:parseInt(S.slice(3,5),16),b:parseInt(S.slice(5,7),16),a:Math.round(A*100)},filter:ie,preview:T,crop:{x:0,y:0,width:300,height:300},saveImage:n=>console.log("saveImage",n),flip:Xe,rotate:he})))};Ee.__docgenInfo={description:"",methods:[],displayName:"WithBrightnessSlider"};we.__docgenInfo={description:"",methods:[],displayName:"WithGradient"};Se.__docgenInfo={description:"",methods:[],displayName:"WithFastGradientPicker"};Te.__docgenInfo={description:"",methods:[],displayName:"GradientTester"};Re.__docgenInfo={description:"",methods:[],displayName:"TestSpecificGradient"};_e.__docgenInfo={description:"",methods:[],displayName:"FullPropsTester"};var _t,Ft,Gt;Ce.parameters={...Ce.parameters,docs:{...(_t=Ce.parameters)==null?void 0:_t.docs,source:{originalSource:"args => <ImageFilters {...args} />",...(Gt=(Ft=Ce.parameters)==null?void 0:Ft.docs)==null?void 0:Gt.source}}};var It,Bt,Lt;Ee.parameters={...Ee.parameters,docs:{...(It=Ee.parameters)==null?void 0:It.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  return <div style={{
    padding: '20px'
  }}>
      <div style={{
      marginBottom: '20px'
    }}>
        <label htmlFor="brightness-slider" style={{
        display: 'block',
        marginBottom: '10px'
      }}>
          Brightness: {brightness}
        </label>
        <input id="brightness-slider" type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
        width: '300px'
      }} />
      </div>
      
      <div style={{
      width: '500px',
      height: '400px',
      border: '1px solid #ccc'
    }}>
        <ImageFilters imageUrl="https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png" brightness={brightness} saveImage={file => console.log('saveImage', file)} />
      </div>
    </div>;
}`,...(Lt=(Bt=Ee.parameters)==null?void 0:Bt.docs)==null?void 0:Lt.source}}};var At,Pt,Mt;we.parameters={...we.parameters,docs:{...(At=we.parameters)==null?void 0:At.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  return <div style={{
    padding: '20px'
  }}>
      <div style={{
      marginBottom: '20px'
    }}>
        <label htmlFor="brightness-slider-gradient" style={{
        display: 'block',
        marginBottom: '10px'
      }}>
          Brightness: {brightness}
        </label>
        <input id="brightness-slider-gradient" type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
        width: '300px'
      }} />
      </div>
      
      <div style={{
      width: '500px',
      height: '400px',
      border: '1px solid #ccc'
    }}>
        <ImageFilters imageUrl="https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png" brightness={brightness} gradient="linear-gradient(45deg, #ff0000, #00ff00, #0000ff)" saveImage={file => console.log('saveImage', file)} />
      </div>
    </div>;
}`,...(Mt=(Pt=we.parameters)==null?void 0:Pt.docs)==null?void 0:Mt.source}}};var Nt,kt,Ht;Se.parameters={...Se.parameters,docs:{...(Nt=Se.parameters)==null?void 0:Nt.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  const [color1, setColor1] = useState('#ff0000');
  const [color2, setColor2] = useState('#00ff00');
  const [color3, setColor3] = useState('#0000ff');
  const [angle, setAngle] = useState(45);
  const gradientString = \`linear-gradient(\${angle}deg, \${color1}, \${color2}, \${color3})\`;
  return <div style={{
    padding: '20px'
  }}>
      <div style={{
      marginBottom: '20px',
      display: 'flex',
      gap: '20px',
      flexWrap: 'wrap'
    }}>
        <div>
          <label htmlFor="brightness-slider-fast" style={{
          display: 'block',
          marginBottom: '5px'
        }}>
            Brightness: {brightness}
          </label>
          <input id="brightness-slider-fast" type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
          width: '200px'
        }} />
        </div>
        
        <div>
          <label htmlFor="angle-slider" style={{
          display: 'block',
          marginBottom: '5px'
        }}>
            Angle: {angle}°
          </label>
          <input id="angle-slider" type="range" min="0" max="360" value={angle} onChange={e => setAngle(Number(e.target.value))} style={{
          width: '200px'
        }} />
        </div>
        
        <div>
          <label htmlFor="color1" style={{
          display: 'block',
          marginBottom: '5px'
        }}>
            Color 1:
          </label>
          <input id="color1" type="color" value={color1} onChange={e => setColor1(e.target.value)} style={{
          width: '50px',
          height: '30px'
        }} />
        </div>
        
        <div>
          <label htmlFor="color2" style={{
          display: 'block',
          marginBottom: '5px'
        }}>
            Color 2:
          </label>
          <input id="color2" type="color" value={color2} onChange={e => setColor2(e.target.value)} style={{
          width: '50px',
          height: '30px'
        }} />
        </div>
        
        <div>
          <label htmlFor="color3" style={{
          display: 'block',
          marginBottom: '5px'
        }}>
            Color 3:
          </label>
          <input id="color3" type="color" value={color3} onChange={e => setColor3(e.target.value)} style={{
          width: '50px',
          height: '30px'
        }} />
        </div>
      </div>
      
      <div style={{
      marginBottom: '10px',
      padding: '10px',
      backgroundColor: '#f5f5f5',
      borderRadius: '4px'
    }}>
        <strong>Current gradient:</strong> {gradientString}
      </div>
      
      <div style={{
      width: '500px',
      height: '400px',
      border: '1px solid #ccc'
    }}>
        <ImageFilters imageUrl="https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png" brightness={brightness} gradient={gradientString} saveImage={file => console.log('saveImage', file)} />
      </div>
    </div>;
}`,...(Ht=(kt=Se.parameters)==null?void 0:kt.docs)==null?void 0:Ht.source}}};var Ut,Wt,qt;Te.parameters={...Te.parameters,docs:{...(Ut=Te.parameters)==null?void 0:Ut.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  const [contrast, setContrast] = useState(0);
  const [saturation, setSaturation] = useState(0);
  const [hueRotate, setHueRotate] = useState(0);
  const [gradientType, setGradientType] = useState('linear');
  const [angle, setAngle] = useState(45);
  const [color1, setColor1] = useState('#ff0000');
  const [color2, setColor2] = useState('#00ff00');
  const [color3, setColor3] = useState('#0000ff');
  const [opacity1, setOpacity1] = useState(100);
  const [opacity2, setOpacity2] = useState(100);
  const [opacity3, setOpacity3] = useState(100);
  const [testResults, setTestResults] = useState<string[]>([]);
  const [isRunningTest, setIsRunningTest] = useState(false);
  const getGradientString = () => {
    const c1 = color1 + Math.floor(opacity1 * 2.55).toString(16).padStart(2, '0');
    const c2 = color2 + Math.floor(opacity2 * 2.55).toString(16).padStart(2, '0');
    const c3 = color3 + Math.floor(opacity3 * 2.55).toString(16).padStart(2, '0');
    if (gradientType === 'linear') {
      return \`linear-gradient(\${angle}deg, \${c1}, \${c2}, \${c3})\`;
    }
    return \`radial-gradient(circle, \${c1}, \${c2}, \${c3})\`;
  };
  const runPerformanceTest = () => {
    setIsRunningTest(true);
    setTestResults([]);
    const startTime = performance.now();

    // Test 1: Fast angle change
    let iterations = 0;
    const maxIterations = 20;
    const testInterval = setInterval(() => {
      setAngle(iterations * 18); // 360° / 20 = 18°
      iterations++;
      if (iterations >= maxIterations) {
        clearInterval(testInterval);
        const totalTime = performance.now() - startTime;
        const avgTime = totalTime / maxIterations;
        setTestResults([\`✅ Performance test completed\`, \`📊 \${maxIterations} angle changes in \${totalTime.toFixed(2)}ms\`, \`⚡ Average time: \${avgTime.toFixed(2)}ms per change\`, \`🎯 FPS: \${(1000 / avgTime).toFixed(1)}\`, \`💾 Gradient caching works\`]);
        setIsRunningTest(false);
      }
    }, 50);
  };
  const runColorTest = () => {
    setIsRunningTest(true);
    setTestResults([]);
    const startTime = performance.now();

    // Test 2: Fast color change
    const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
    let colorIndex = 0;
    let iterations = 0;
    const maxIterations = 30;
    const testInterval = setInterval(() => {
      setColor1(colors[colorIndex % colors.length]);
      setColor2(colors[(colorIndex + 1) % colors.length]);
      setColor3(colors[(colorIndex + 2) % colors.length]);
      colorIndex++;
      iterations++;
      if (iterations >= maxIterations) {
        clearInterval(testInterval);
        const totalTime = performance.now() - startTime;
        const avgTime = totalTime / maxIterations;
        setTestResults([\`✅ Color change test completed\`, \`📊 \${maxIterations} color changes in \${totalTime.toFixed(2)}ms\`, \`⚡ Average time: \${avgTime.toFixed(2)}ms per change\`, \`🎯 FPS: \${(1000 / avgTime).toFixed(1)}\`, \`🎨 Gradient updates smoothly\`]);
        setIsRunningTest(false);
      }
    }, 30);
  };
  return <div style={{
    padding: '20px'
  }}>
      <h2 style={{
      marginBottom: '20px',
      color: '#333'
    }}>🧪 Gradient Tester</h2>
      
      {/* Filter controls */}
      <div style={{
      marginBottom: '20px',
      padding: '15px',
      backgroundColor: '#f8f9fa',
      borderRadius: '8px'
    }}>
        <h3 style={{
        marginBottom: '15px',
        color: '#555'
      }}>Image Filters</h3>
        <div style={{
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
        gap: '15px'
      }}>
          <div>
            <label>Brightness: {brightness}</label>
            <input type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
            width: '100%'
          }} />
          </div>
          <div>
            <label>Contrast: {contrast}</label>
            <input type="range" min="-100" max="100" value={contrast} onChange={e => setContrast(Number(e.target.value))} style={{
            width: '100%'
          }} />
          </div>
          <div>
            <label>Saturation: {saturation}</label>
            <input type="range" min="-100" max="100" value={saturation} onChange={e => setSaturation(Number(e.target.value))} style={{
            width: '100%'
          }} />
          </div>
          <div>
            <label>Hue: {hueRotate}°</label>
            <input type="range" min="0" max="360" value={hueRotate} onChange={e => setHueRotate(Number(e.target.value))} style={{
            width: '100%'
          }} />
          </div>
        </div>
      </div>
      
      {/* Gradient controls */}
      <div style={{
      marginBottom: '20px',
      padding: '15px',
      backgroundColor: '#e7f3ff',
      borderRadius: '8px'
    }}>
        <h3 style={{
        marginBottom: '15px',
        color: '#555'
      }}>Gradient Settings</h3>
        
        <div style={{
        marginBottom: '15px'
      }}>
          <label>Gradient type:</label>
          <select value={gradientType} onChange={e => setGradientType(e.target.value)} style={{
          marginLeft: '10px',
          padding: '5px',
          borderRadius: '4px'
        }}>
            <option value="linear">Linear</option>
            <option value="radial">Radial</option>
          </select>
        </div>
        
        {gradientType === 'linear' && <div style={{
        marginBottom: '15px'
      }}>
            <label>Angle: {angle}°</label>
            <input type="range" min="0" max="360" value={angle} onChange={e => setAngle(Number(e.target.value))} style={{
          width: '300px',
          marginLeft: '10px'
        }} />
          </div>}
        
        <div style={{
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',
        gap: '15px'
      }}>
          <div>
            <label>Color 1:</label>
            <input type="color" value={color1} onChange={e => setColor1(e.target.value)} style={{
            marginLeft: '5px',
            width: '40px',
            height: '30px'
          }} />
            <input type="range" min="0" max="100" value={opacity1} onChange={e => setOpacity1(Number(e.target.value))} style={{
            width: '100px',
            marginLeft: '5px'
          }} />
            <span style={{
            fontSize: '12px'
          }}>{opacity1}%</span>
          </div>
          
          <div>
            <label>Color 2:</label>
            <input type="color" value={color2} onChange={e => setColor2(e.target.value)} style={{
            marginLeft: '5px',
            width: '40px',
            height: '30px'
          }} />
            <input type="range" min="0" max="100" value={opacity2} onChange={e => setOpacity2(Number(e.target.value))} style={{
            width: '100px',
            marginLeft: '5px'
          }} />
            <span style={{
            fontSize: '12px'
          }}>{opacity2}%</span>
          </div>
          
          <div>
            <label>Color 3:</label>
            <input type="color" value={color3} onChange={e => setColor3(e.target.value)} style={{
            marginLeft: '5px',
            width: '40px',
            height: '30px'
          }} />
            <input type="range" min="0" max="100" value={opacity3} onChange={e => setOpacity3(Number(e.target.value))} style={{
            width: '100px',
            marginLeft: '5px'
          }} />
            <span style={{
            fontSize: '12px'
          }}>{opacity3}%</span>
          </div>
        </div>
      </div>
      
      {/* CSS gradient */}
      <div style={{
      marginBottom: '20px',
      padding: '10px',
      backgroundColor: '#f0f0f0',
      borderRadius: '4px',
      fontFamily: 'monospace',
      fontSize: '12px'
    }}>
        <strong>CSS gradient:</strong> {getGradientString()}
      </div>
      
      {/* Test buttons */}
      <div style={{
      marginBottom: '20px',
      display: 'flex',
      gap: '10px'
    }}>
        <button onClick={runPerformanceTest} disabled={isRunningTest} style={{
        padding: '10px 20px',
        backgroundColor: isRunningTest ? '#ccc' : '#007bff',
        color: 'white',
        border: 'none',
        borderRadius: '4px',
        cursor: isRunningTest ? 'not-allowed' : 'pointer'
      }}>
          {isRunningTest ? 'Testing...' : 'Performance Test'}
        </button>
        
        <button onClick={runColorTest} disabled={isRunningTest} style={{
        padding: '10px 20px',
        backgroundColor: isRunningTest ? '#ccc' : '#28a745',
        color: 'white',
        border: 'none',
        borderRadius: '4px',
        cursor: isRunningTest ? 'not-allowed' : 'pointer'
      }}>
          {isRunningTest ? 'Testing...' : 'Color Change Test'}
        </button>
      </div>
      
      {/* Test results */}
      {testResults.length > 0 && <div style={{
      marginBottom: '20px',
      padding: '15px',
      backgroundColor: '#d4edda',
      borderRadius: '8px',
      border: '1px solid #c3e6cb'
    }}>
          <h4 style={{
        marginBottom: '10px',
        color: '#155724'
      }}>📊 Test Results</h4>
          {testResults.map((result, index) => <div key={index} style={{
        marginBottom: '5px',
        fontFamily: 'monospace',
        fontSize: '14px'
      }}>
              {result}
            </div>)}
        </div>}
      
      {/* Image with filters */}
      <div style={{
      width: '600px',
      height: '400px',
      border: '2px solid #ddd',
      borderRadius: '8px',
      overflow: 'hidden'
    }}>
        <ImageFilters imageUrl="https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png" brightness={brightness} contrast={contrast} saturation={saturation} hueRotate={hueRotate} gradient={getGradientString()} saveImage={file => console.log('saveImage', file)} />
      </div>
      
      {/* Instructions */}
      <div style={{
      marginTop: '20px',
      padding: '15px',
      backgroundColor: '#fff3cd',
      borderRadius: '8px',
      border: '1px solid #ffeaa7'
    }}>
        <h4 style={{
        marginBottom: '10px',
        color: '#856404'
      }}>📋 Test Instructions</h4>
        <ul style={{
        margin: 0,
        paddingLeft: '20px',
        color: '#856404'
      }}>
          <li>Use sliders to change image filters</li>
          <li>Set up gradient: select type, angle, colors, and opacity</li>
          <li>Run performance tests to check speed</li>
          <li>Watch results in real time</li>
          <li>Ensure gradient applies without delay</li>
        </ul>
      </div>
    </div>;
}`,...(qt=(Wt=Te.parameters)==null?void 0:Wt.docs)==null?void 0:qt.source}}};var $t,Xt,Dt;Re.parameters={...Re.parameters,docs:{...($t=Re.parameters)==null?void 0:$t.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  const [testGradientIndex, setTestGradientIndex] = useState(0);

  // Test gradients
  const testGradients = [{
    name: "Working gradient (hex with alpha)",
    gradient: "linear-gradient(43deg, #a87171fe, #00ff00fe, #656576fe)"
  }, {
    name: "Problem gradient (rgba with percentages)",
    gradient: "linear-gradient(159deg,rgba(235, 0, 125, 1) 0%, rgba(0, 0, 0, 0.73) 100%)"
  }, {
    name: "Simple rgba gradient",
    gradient: "linear-gradient(45deg, rgba(255, 0, 0, 0.8), rgba(0, 255, 0, 0.6))"
  }, {
    name: "Gradient with different positions",
    gradient: "linear-gradient(90deg, rgba(255, 0, 0, 1) 0%, rgba(0, 255, 0, 0.5) 50%, rgba(0, 0, 255, 0.8) 100%)"
  }];
  const currentGradient = testGradients[testGradientIndex];
  return <div style={{
    padding: '20px'
  }}>
      <h2 style={{
      marginBottom: '20px',
      color: '#333'
    }}>🧪 Test Specific Gradients</h2>
      
      {/* Gradient selection */}
      <div style={{
      marginBottom: '20px',
      padding: '15px',
      backgroundColor: '#f8f9fa',
      borderRadius: '8px'
    }}>
        <h3 style={{
        marginBottom: '15px',
        color: '#555'
      }}>Select gradient for testing</h3>
        <select value={testGradientIndex} onChange={e => setTestGradientIndex(Number(e.target.value))} style={{
        padding: '8px',
        borderRadius: '4px',
        width: '100%',
        marginBottom: '10px'
      }}>
          {testGradients.map((grad, index) => <option key={index} value={index}>
              {grad.name}
            </option>)}
        </select>
        
        <div style={{
        padding: '10px',
        backgroundColor: '#f0f0f0',
        borderRadius: '4px',
        fontFamily: 'monospace',
        fontSize: '12px'
      }}>
          <strong>Current gradient:</strong><br />
          {currentGradient.gradient}
        </div>
      </div>
      
      <div style={{
      marginBottom: '20px'
    }}>
        <label>Brightness: {brightness}</label>
        <input type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
        width: '300px',
        marginLeft: '10px'
      }} />
      </div>
      
      <div style={{
      width: '600px',
      height: '400px',
      border: '2px solid #ddd',
      borderRadius: '8px',
      overflow: 'hidden'
    }}>
        <ImageFilters imageUrl="https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png" brightness={brightness} gradient={currentGradient.gradient} saveImage={file => console.log('saveImage', file)} />
      </div>
      
      <div style={{
      marginTop: '20px',
      padding: '15px',
      backgroundColor: '#fff3cd',
      borderRadius: '8px',
      border: '1px solid #ffeaa7'
    }}>
        <h4 style={{
        marginBottom: '10px',
        color: '#856404'
      }}>🔍 Debugging</h4>
        <p style={{
        color: '#856404',
        margin: 0
      }}>
          Open browser console (F12) and check logs. Should be messages about gradient creation and its application.
        </p>
        <ul style={{
        margin: '10px 0 0 0',
        paddingLeft: '20px',
        color: '#856404'
      }}>
          <li>Check that gradient is created without errors</li>
          <li>Ensure that color positions are parsed correctly</li>
          <li>Watch gradient application messages in WebGL</li>
        </ul>
      </div>
    </div>;
}`,...(Dt=(Xt=Re.parameters)==null?void 0:Xt.docs)==null?void 0:Dt.source}}};var Ot,Vt,zt;_e.parameters={..._e.parameters,docs:{...(Ot=_e.parameters)==null?void 0:Ot.docs,source:{originalSource:`() => {
  const [brightness, setBrightness] = useState(0);
  const [contrast, setContrast] = useState(0);
  const [saturation, setSaturation] = useState(0);
  const [hueRotate, setHueRotate] = useState(0);
  const [sharpness, setSharpness] = useState(0);
  const [highlights, setHighlights] = useState(0);
  const [shadows, setShadows] = useState(0);
  const [vignette, setVignette] = useState(0);
  const [grain, setGrain] = useState(0);
  const [filterIntensity, setFilterIntensity] = useState(1);
  const [redChannel, setRedChannel] = useState(1);
  const [greenChannel, setGreenChannel] = useState(1);
  const [blueChannel, setBlueChannel] = useState(1);
  const [canvasColor, setCanvasColor] = useState('#ffffff');
  const [canvasAlpha, setCanvasAlpha] = useState(0);
  const [filter, setFilter] = useState('none');
  const [preview, setPreview] = useState(false);
  const [imageUrl, setImageUrl] = useState('https://simpleecreate.com/images/rCfBiP7oGHVJOWMPHhY365ZGlWt3bjQGLXQq38bP.png');

  // Gradient
  const [gradientType, setGradientType] = useState('linear');
  const [angle, setAngle] = useState(45);
  const [color1, setColor1] = useState('#ff0000');
  const [color2, setColor2] = useState('#00ff00');
  const [color3, setColor3] = useState('#0000ff');
  const [opacity1, setOpacity1] = useState(100);
  const [opacity2, setOpacity2] = useState(100);
  const [opacity3, setOpacity3] = useState(100);
  const [flip, setFlip] = useState('none');
  const [rotate, setRotate] = useState(0);
  // Filter presets (example)
  const filterOptions = ['none', 'static', 'frequency', 'broadcast', 'retro', 'transistor', 'jazz', 'classic', 'naight8', 'alpine', 'tokyo', 'bw', 'vintage', 'cool', 'warm', 'custom'];

  // Collect gradient string
  const getGradientString = () => {
    const c1 = color1 + Math.floor(opacity1 * 2.55).toString(16).padStart(2, '0');
    const c2 = color2 + Math.floor(opacity2 * 2.55).toString(16).padStart(2, '0');
    const c3 = color3 + Math.floor(opacity3 * 2.55).toString(16).padStart(2, '0');
    if (gradientType === 'linear') {
      return \`linear-gradient(\${angle}deg, \${c1}, \${c2}, \${c3})\`;
    }
    return \`radial-gradient(circle, \${c1}, \${c2}, \${c3})\`;
  };
  const [width, setWidth] = useState(1024);
  const [height, setHeight] = useState(768);
  const [positionX, setPositionX] = useState(0);
  const [positionY, setPositionY] = useState(0);
  // Crop state
  const [cropX, setCropX] = useState(0);
  const [cropY, setCropY] = useState(0);
  const [cropWidth, setCropWidth] = useState(496);
  const [cropHeight, setCropHeight] = useState(768);
  return <div style={{
    padding: 20
  }}>
      <h2>🧪 FullPropsTester: All ImageFilters props</h2>
      \\

     
      <div style={{
      display: 'grid',
      gridTemplateColumns: 'repeat(auto-fit, minmax(260px, 1fr))',
      gap: 20,
      marginBottom: 30
    }}>
        <div>
          <label>Brightness: {brightness}</label>
          <input type="range" min="-100" max="100" value={brightness} onChange={e => setBrightness(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Contrast: {contrast}</label>
          <input type="range" min="-100" max="100" value={contrast} onChange={e => setContrast(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Saturation: {saturation}</label>
          <input type="range" min="-100" max="100" value={saturation} onChange={e => setSaturation(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Hue: {hueRotate}°</label>
          <input type="range" min="0" max="360" value={hueRotate} onChange={e => setHueRotate(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Sharpness: {sharpness}</label>
          <input type="range" min="0" max="100" value={sharpness} onChange={e => setSharpness(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Highlights: {highlights}</label>
          <input type="range" min="-100" max="100" value={highlights} onChange={e => setHighlights(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Shadows: {shadows}</label>
          <input type="range" min="-100" max="100" value={shadows} onChange={e => setShadows(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Vignette: {vignette}</label>
          <input type="range" min="0" max="100" value={vignette} onChange={e => setVignette(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Grain: {grain}</label>
          <input type="range" min="0" max="100" value={grain} onChange={e => setGrain(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Filter intensity: {filterIntensity}</label>
          <input type="range" min="0" max="1" step="0.01" value={filterIntensity} onChange={e => setFilterIntensity(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Red Channel: {redChannel}</label>
          <input type="range" min="0" max="2" step="0.01" value={redChannel} onChange={e => setRedChannel(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Green Channel: {greenChannel}</label>
          <input type="range" min="0" max="2" step="0.01" value={greenChannel} onChange={e => setGreenChannel(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Blue Channel: {blueChannel}</label>
          <input type="range" min="0" max="2" step="0.01" value={blueChannel} onChange={e => setBlueChannel(Number(e.target.value))} style={{
          width: '100%'
        }} />
        </div>
        <div>
          <label>Canvas Color:</label>
          <input type="color" value={canvasColor} onChange={e => setCanvasColor(e.target.value)} style={{
          width: '60px',
          height: '30px',
          marginLeft: 8
        }} />
          <label style={{
          marginLeft: 8
        }}>Alpha: {canvasAlpha}</label>
          <input type="range" min="0" max="1" step="0.01" value={canvasAlpha} onChange={e => setCanvasAlpha(Number(e.target.value))} style={{
          width: '80px',
          marginLeft: 8
        }} />
        </div>
        <div style={{
        gridColumn: '1/-1',
        background: '#e7f3ff',
        borderRadius: 8,
        padding: 16,
        marginBottom: 10
      }}>
          <h4>Gradient</h4>
          <div style={{
          marginBottom: 10
        }}>
            <label>Gradient type:</label>
            <select value={gradientType} onChange={e => setGradientType(e.target.value)} style={{
            marginLeft: 10
          }}>
              <option value="linear">Linear</option>
              <option value="radial">Radial</option>
            </select>
          </div>
          {gradientType === 'linear' && <div style={{
          marginBottom: 10
        }}>
              <label>Angle: {angle}°</label>
              <input type="range" min="0" max="360" value={angle} onChange={e => setAngle(Number(e.target.value))} style={{
            width: '200px',
            marginLeft: 10
          }} />
            </div>}
          <div style={{
          display: 'flex',
          gap: 20,
          flexWrap: 'wrap'
        }}>
            <div>
              <label>Color 1:</label>
              <input type="color" value={color1} onChange={e => setColor1(e.target.value)} style={{
              marginLeft: 8,
              width: '40px',
              height: '30px'
            }} />
              <input type="range" min="0" max="100" value={opacity1} onChange={e => setOpacity1(Number(e.target.value))} style={{
              width: '100px',
              marginLeft: 8
            }} />
              <span style={{
              fontSize: '12px'
            }}>{opacity1}%</span>
            </div>
            <div>
              <label>Color 2:</label>
              <input type="color" value={color2} onChange={e => setColor2(e.target.value)} style={{
              marginLeft: 8,
              width: '40px',
              height: '30px'
            }} />
              <input type="range" min="0" max="100" value={opacity2} onChange={e => setOpacity2(Number(e.target.value))} style={{
              width: '100px',
              marginLeft: 8
            }} />
              <span style={{
              fontSize: '12px'
            }}>{opacity2}%</span>
            </div>
            <div>
              <label>Color 3:</label>
              <input type="color" value={color3} onChange={e => setColor3(e.target.value)} style={{
              marginLeft: 8,
              width: '40px',
              height: '30px'
            }} />
              <input type="range" min="0" max="100" value={opacity3} onChange={e => setOpacity3(Number(e.target.value))} style={{
              width: '100px',
              marginLeft: 8
            }} />
              <span style={{
              fontSize: '12px'
            }}>{opacity3}%</span>
            </div>
          </div>
          <div style={{
          marginTop: 10,
          fontFamily: 'monospace',
          fontSize: 13,
          background: '#f0f0f0',
          borderRadius: 4,
          padding: 8
        }}>
            <strong>CSS gradient:</strong> {getGradientString()}
          </div>
        </div>
        <div>
          <label>Filter:</label>
          <select value={filter} onChange={e => setFilter(e.target.value)} style={{
          width: '100%'
        }}>
            {filterOptions.map(opt => <option key={opt} value={opt}>{opt}</option>)}
          </select>
        </div>
        <div>
          <label>Preview:</label>
          <input type="checkbox" checked={preview} onChange={e => setPreview(e.target.checked)} style={{
          marginLeft: 8
        }} />
        </div>
        <div>
          <label>Image URL:</label>
          <input type="text" value={imageUrl} onChange={e => setImageUrl(e.target.value)} style={{
          width: '100%'
        }} />
        </div>
      
      </div>
      <div style={{
      marginBottom: 20,
      display: 'flex',
      gap: 20,
      flexDirection: 'column'
    }}>
      
      <div>

            <label>Position X: {positionX}px</label>
            <input type="range" min="-100" max="100" value={positionX} onChange={e => setPositionX(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            
            <label>Width: {width}px</label>
            <input type="range" min="100" max="1000" value={width} onChange={e => setWidth(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            <label>Height: {height}px</label>
            <input type="range" min="100" max="1000" value={height} onChange={e => setHeight(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
       
          {/* Crop sliders */}
          <div>
            <label>Crop X: {cropX}px</label>
            <input type="range" min={-width + 10} max={width - 10} value={cropX} onChange={e => setCropX(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            <label>Crop Y: {cropY}px</label>
            <input type="range" min={-height + 10} max={height - 10} value={cropY} onChange={e => setCropY(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            <label>Crop Width: {cropWidth}px</label>
            <input type="range" min="10" max={width - cropX} value={cropWidth} onChange={e => setCropWidth(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            <label>Crop Height: {cropHeight}px</label>
            <input type="range" min="10" max={height - cropY} value={cropHeight} onChange={e => setCropHeight(Number(e.target.value))} style={{
          width: 200
        }} />
          </div>
          <div>
            <label>Flip:</label>
            <button onClick={() => setFlip('horizontal')}>Horizontal</button>
            <button onClick={() => setFlip('vertical')}>Vertical</button>
          </div>
        </div>
        <div>
          <label>Rotate: {rotate}°</label>
          <input type="range" min="0" max="360" value={rotate} onChange={e => setRotate(Number(e.target.value))} style={{
        width: '100%'
      }} />
        </div>

        <div style={{
      backgroundColor: 'red',
      height: '600px',
      width: '900px',
      border: '2px solid #ddd',
      borderRadius: 8,
      overflow: 'hidden',
      margin: '0 auto',
      position: 'relative',
      left: positionX,
      top: positionY
    }}>
        <ImageFilters imageUrl={imageUrl} brightness={brightness} contrast={contrast} saturation={saturation} hueRotate={hueRotate} sharpness={sharpness} highlights={highlights} shadows={shadows} vignette={vignette} grain={grain} filterIntensity={filterIntensity * 100} redChannel={redChannel} greenChannel={greenChannel} blueChannel={blueChannel} canvasColor={{
        r: parseInt(canvasColor.slice(1, 3), 16),
        g: parseInt(canvasColor.slice(3, 5), 16),
        b: parseInt(canvasColor.slice(5, 7), 16),
        a: Math.round(canvasAlpha * 100)
      }}
      // gradient={getGradientString()}
      filter={filter} preview={preview}
      // styles={{}}
      crop={{
        x: 0,
        y: 0,
        width: 300,
        height: 300
      }} saveImage={file => console.log('saveImage', file)} flip={flip} rotate={rotate} />
      </div>
    
     
    </div>;
}`,...(zt=(Vt=_e.parameters)==null?void 0:Vt.docs)==null?void 0:zt.source}}};const Da=["Default","WithBrightnessSlider","WithGradient","WithFastGradientPicker","GradientTester","TestSpecificGradient","FullPropsTester"];export{Ce as Default,_e as FullPropsTester,Te as GradientTester,Re as TestSpecificGradient,Ee as WithBrightnessSlider,Se as WithFastGradientPicker,we as WithGradient,Da as __namedExportsOrder,Xa as default};
